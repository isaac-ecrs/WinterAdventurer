@using MudBlazor

<MudItem xs="12" id="pdf-generation-section" Class="d-flex gap-3 align-center">
    <MudButton ButtonType="ButtonType.Submit"
               Variant="Variant.Filled"
               Color="Color.Primary"
               Disabled="@(IsDisabled || IsLoading)">
        Create PDF
    </MudButton>
    <MudButton ButtonType="ButtonType.Button"
               Variant="Variant.Filled"
               Color="Color.Secondary"
               OnClick="OnCreateMasterScheduleClicked"
               Disabled="@(IsDisabled || IsLoading)">
        Download Master Schedule
    </MudButton>
    @if (IsLoading)
    {
        <MudProgressCircular Color="Color.Primary" Size="Size.Small" Indeterminate="true" />
        <MudText Typo="Typo.body2" Color="Color.Primary">Generating PDF...</MudText>
    }
</MudItem>

@code {
    /// <summary>
    /// Indicates whether the PDF generation buttons should be disabled
    /// (e.g., due to validation errors)
    /// </summary>
    [Parameter]
    public bool IsDisabled { get; set; }

    /// <summary>
    /// Indicates whether PDF is currently being generated (shows loading spinner)
    /// </summary>
    [Parameter]
    public bool IsLoading { get; set; }

    /// <summary>
    /// Event callback invoked when the "Download Master Schedule" button is clicked
    /// Note: "Create PDF" uses ButtonType.Submit and is handled by the parent form
    /// </summary>
    [Parameter]
    public EventCallback OnCreateMasterSchedule { get; set; }

    private async Task OnCreateMasterScheduleClicked()
    {
        await OnCreateMasterSchedule.InvokeAsync();
    }
}

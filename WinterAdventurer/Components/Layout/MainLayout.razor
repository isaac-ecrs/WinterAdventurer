@inherits LayoutComponentBase
@using MudBlazor
@using WinterAdventurer.Services
@inject ThemeService ThemeService
@implements IDisposable

<div class="theme-transition-overlay @(ThemeService.IsTransitioning ? "active" : "")"></div>

<MudLayout>
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.Large" Class="pa-4">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    protected override void OnInitialized()
    {
        ThemeService.OnThemeChanged += HandleThemeChanged;
    }

    private void HandleThemeChanged()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        ThemeService.OnThemeChanged -= HandleThemeChanged;
    }
}
